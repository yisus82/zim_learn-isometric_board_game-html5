<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <title>Isometric board game</title>
    <script type="module">
      import zim from "https://zimjs.org/cdn/017/zim_game";

      const OBSTACLE = "0";
      const LIGHT = "1";

      new Frame(FIT, 1024, 768, black, dark, ready);

      function ready() {
        const board = new Board({
          backgroundColor: grey,
          indicatorBorderColor: light,
        }).center();

        const player = new Person();
        board.add(player, 3, 0);

        board.add(new Tree().alp(.8), 4, 3);
        board.add(new Tree().alp(.8), 5, 7);
        board.add(new Tree(), 0, 5);
        board.add(new Tree(), 5, 0);

        const correctColors = series(pink, red, blue, yellow, green).shuffle();
        new Tile(new Circle(20, correctColors), 5, 1, 10)
          .pos(40, 40, RIGHT, BOTTOM);
        new Label("To pass, reveal the orbs in this order", 40, null, purple)
          .loc(70, 690);

        const colors = shuffle(correctColors.array);
        const positions = [[1, 1], [5, 2], [6, 6], [2, 7], [3, 4]];
        loop(colors, (color, i) => {
          const cover = new Rectangle(70, 70, silver);
          const lantern = new Container(cover.width, cover.height);
          cover.addTo(lantern);
          lantern.reg(CENTER, lantern.height - 30).sca(.5);
          lantern.cover = cover;
          lantern.orb = new Orb(cover.width * .3, color);
          board.add(lantern, positions[i][0], positions[i][1], LIGHT);
        });
      }
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>

  <body></body>

</html>